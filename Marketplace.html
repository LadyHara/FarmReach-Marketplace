<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Marketplace - Agri Marketplace</title>
  <style>

.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #2d6a4f;
  padding: 20px 40px; /* thicker padding */
  position: sticky;
  top: 0;
  z-index: 10;
  height: 70px; /* controls thickness */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.navbar-content {
  display: flex;
  align-items: center;
  gap: 50px;
  justify-content: center;
  width: 100%;
}

.navbar ul {
  display: flex;
  list-style: none;
  gap: 25px;
  margin: 0;
  padding: 0;
}

.navbar ul li a {
  color: white;
  text-decoration: none;
  font-weight: bold;
  transition: color 0.3s ease;
  font-size: 16px;
}

.navbar ul li a:hover {
  color: #b7e4c7;
}

.search-container {
  display: flex;
  align-items: center;
  gap: 10px;
}

.search-container input {
  padding: 10px 16px;
  border-radius: 5px;
  border: none;
  outline: none;
  font-size: 16px;
  width: 800px; 
}

.search-container button {
  padding: 8px 14px;
  background-color: #40916c;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.3s;
}

.search-container button:hover {
  background-color: #1b4332;
}

    body {
      font-family: Arial, sans-serif;
      background-color: #f7fdf9;
      margin: 0;
      padding: 0;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('images/farm.jpg') center/cover no-repeat;
      filter: blur(8px);
      opacity: 0.7;
      z-index: -1;
    }

    header {
      background-color: #2d6a4f;
      color: white;
      padding: 20px;
      text-align: center;
      margin-top: 5px;
    }

    .marketplace-container {
      padding: 30px;
      max-width: 1200px;
      margin: auto;
    }

/* Adjusted search + cart container */
.search-container {
  display: flex;
  align-items: center;
  gap: 10px;
  position: relative;
}

.search-container input {
  padding: 10px 16px;
  border-radius: 5px;
  border: none;
  outline: none;
  font-size: 16px;
  width: 400px;
}

.search-container button {
  padding: 8px 14px;
  background-color: #40916c;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.3s;
}

.search-container button i {
  font-size: 16px;
}

.search-container button:hover {
  background-color: #1b4332;
}

.cart-wrapper {
  position: relative;
}

.cart-icon {
  position: relative;
  font-size: 28px;
  color: white;
  cursor: pointer;
}

.cart-icon i {
  font-size: 28px;
}

#cart-count {
  position: absolute;
  top: -10px;
  right: -10px;
  background-color: red;
  color: white;
  font-size: 14px;
  padding: 2px 6px;
  border-radius: 50%;
  font-weight: bold;
}

.cart-dropdown {
  display: none;
  position: absolute;
  top: 40px;
  right: 0;
  background-color: white;
  border-radius: 8px;
  width: 250px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  padding: 15px;
  z-index: 99;
  color: black;
}

.cart-dropdown p {
  font-size: 14px;
  margin: 0 0 10px;
}

.cart-dropdown .go-to-cart {
  display: inline-block;
  margin-top: 10px;
  padding: 8px 12px;
  background-color: #2d6a4f;
  color: white;
  text-decoration: none;
  border-radius: 5px;
  font-size: 14px;
  text-align: center;
}

.cart-dropdown .go-to-cart:hover {
  background-color: #1b4332;
}
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .product-card {
      background-color: #ffffff;
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: transform 0.2s;
    }

    .product-card:hover {
      transform: scale(1.02);
    }

    .product-card img {
      max-width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .product-name {
      font-weight: bold;
      margin: 10px 0 5px;
      color: #1b4332;
    }

    .product-price {
      color: #40916c;
      font-size: 16px;
      margin-bottom: 10px;
    }

    .buy-btn {
      background-color: #2d6a4f;
      color: white;
      border: none;
      padding: 10px;
      width: 100%;
      border-radius: 5px;
      cursor: pointer;
    }

    .buy-btn:hover {
      background-color: #1b4332;
    }
  </style>
</head>
<body>
  <header>
    <h1>FarmReach Marketplace</h1>
    <p>Buy fresh produce directly from local farmers!</p>
  </header> 

  <!-- ✅ NAVIGATION BAR -->
<nav class="navbar">
  <div class="navbar-content">
    <ul>
      <li><a href="Home.html">Home</a></li>
      <li><a href="marketplace.html">Marketplace</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="login.html">My Dashboard</a></li>
    </ul>
 <div class="search-container">
  <input type="text" placeholder="Search products..." />
  <button type="submit"><i class="fas fa-search"></i></button>

  <div class="cart-wrapper">
    <a href="login.html" class="cart-icon" style="text-decoration: none;">
  <i class="fas fa-shopping-cart"></i>
  <span id="cart-count">0</span>
</a>
    <div class="cart-dropdown" id="cart-dropdown">
      <p id="cart-items">Your cart is empty.</p>
      <a href="cart.html" class="go-to-cart">Go to Cart</a>
    </div>
<!-- ✅ POPUP MODAL FOR ADD TO CART -->
<div id="popup-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); justify-content:center; align-items:center; z-index:100;">
  <div style="background:white; padding:20px; border-radius:10px; width:300px; position:relative;">
    <span onclick="closePopup()" style="position:absolute; top:10px; right:15px; font-weight:bold; font-size:20px; cursor:pointer;">&times;</span>
    
    <img id="popup-image" src="" alt="Product Image" style="width:100%; height:150px; object-fit:cover; border-radius:8px; margin-bottom:10px;">
    
    <h3 id="popup-name" style="margin:10px 0 5px;"></h3>
    <p id="popup-price" style="color:#40916c; font-weight:bold;"></p>
    
    <label for="popup-quantity">Quantity:</label>
    <div style="display:flex; align-items:center; gap:10px; margin-top:5px; margin-bottom:10px;">
      <button onclick="adjustQuantity(-1)" style="width:30px; height:30px;">−</button>
      <input type="number" id="popup-quantity" value="1" min="1" style="width:60px; text-align:center;">
      <button onclick="adjustQuantity(1)" style="width:30px; height:30px;">+</button>
    </div>
    
    <button onclick="confirmAddToCart()" style="margin-top:5px; background-color:#2d6a4f; color:white; border:none; padding:10px; width:100%; border-radius:5px; cursor:pointer;">Add to Cart</button>
  </div>
</div>
</div>
  </div>
</div>
  </div>
</nav>
  <div class="marketplace-container">
    <div class="product-grid">
      <!-- Product 1 -->
      <div class="product-card">
        <img src="images/mangoes.jpg" alt="Mangoes"> 
        <div class="product-name">Fresh Mangoes (1kg)</div>
        <div class="product-price">₱120</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 2 -->
      <div class="product-card">
        <img src="images/tomatoes.jpg" alt="Tomatoes">
        <div class="product-name">Red Tomatoes (1kg)</div>
        <div class="product-price">₱80</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 3 -->
      <div class="product-card">
        <img src="images/rice.jpg" alt="Rice">
        <div class="product-name">Regular Miled Rice (1kg)</div>
        <div class="product-price">₱40</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 4 -->
      <div class="product-card">
        <img src="images/eggplant.jpg" alt="Eggplant">
        <div class="product-name">Eggplant (1kg)</div>
        <div class="product-price">₱60</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 5 -->
      <div class="product-card">
        <img src="images/banana.jpg" alt="Banana">
        <div class="product-name">Banana (1kg)</div>
        <div class="product-price">₱110</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 6 -->
      <div class="product-card">
        <img src="images/ampalaya.jpg" alt="Ampalaya">
        <div class="product-name">Ampalaya (1kg)</div>
        <div class="product-price">₱95</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 7 -->
      <div class="product-card">
        <img src="images/sili.jpg" alt="Sili">
        <div class="product-name">Sili (1kg)</div>
        <div class="product-price">₱120</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 8 -->
      <div class="product-card">
        <img src="images/sitaw.jpg" alt="Sitaw">
        <div class="product-name">Sitaw (1kg)</div>
        <div class="product-price">₱150</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 9 -->
      <div class="product-card">
        <img src="images/pechay.jpg" alt="Pechay">
        <div class="product-name">Pechay (1kg)</div>
        <div class="product-price">₱90</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- Product 10 -->
      <div class="product-card">
        <img src="images/coconut.jpg" alt="Coconut">
        <div class="product-name">Coconut (pcs)</div>
        <div class="product-price">₱20</div>
        <button class="buy-btn">Add to Cart</button>
      </div>

      <!-- More products can be added here -->
    </div>
  </div>
<script>
  const cartCountDisplay = document.getElementById('cart-count');
  const cartItemsContainer = document.getElementById('cart-items');
  const cartDropdown = document.getElementById('cart-dropdown');
  const addToCartButtons = document.querySelectorAll('.buy-btn');

  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  // Popup modal references
  const popup = document.getElementById('popup-modal');
  const popupImage = document.getElementById('popup-image');
  const popupName = document.getElementById('popup-name');
  const popupPrice = document.getElementById('popup-price');
  const popupQuantity = document.getElementById('popup-quantity');

  let selectedProduct = null;

  function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
  }

  function addToCart(product, quantity) {
    const existingItem = cart.find(item => item.name === product.name);
    if (existingItem) {
      existingItem.quantity += quantity;
    } else {
      cart.push({ ...product, quantity });
    }
    saveCart();
    updateCartUI();
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    saveCart();
    updateCartUI();
  }

  function updateCartUI() {
    cartCountDisplay.textContent = cart.reduce((total, item) => total + item.quantity, 0);
    if (cart.length === 0) {
      cartItemsContainer.innerHTML = "Your cart is empty.";
      return;
    }

    cartItemsContainer.innerHTML = '<ul style="padding-left: 0;">' +
      cart.map((item, index) => `
        <li style="list-style: none; display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
          <img src="${item.image}" alt="${item.name}" style="width: 40px; height: 40px; object-fit: cover; border-radius: 5px;">
          <div style="flex: 1;">
            <div style="font-size: 14px; font-weight: bold;">${item.name}</div>
            <div style="font-size: 13px;">₱${item.price} x ${item.quantity}</div>
          </div>
          <button onclick="removeFromCart(${index})" style="background: red; color: white; border: none; border-radius: 4px; padding: 2px 6px; cursor: pointer;">×</button>
        </li>
      `).join('') +
      '</ul>';
  }

  // Handle Buy Button
  addToCartButtons.forEach(button => {
    button.addEventListener('click', () => {
      const productCard = button.closest('.product-card');
      selectedProduct = {
        name: productCard.querySelector('.product-name').textContent,
        price: parseInt(productCard.querySelector('.product-price').textContent.replace('₱', '')),
        image: productCard.querySelector('img').getAttribute('src')
      };
      showPopup(selectedProduct);
    });
  });

  function showPopup(product) {
    popupImage.src = product.image;
    popupName.textContent = product.name;
    popupPrice.textContent = `₱${product.price}`;
    popupQuantity.value = 1;
    popup.style.display = 'flex';
  }

  function closePopup() {
    popup.style.display = 'none';
    selectedProduct = null;
  }

  function confirmAddToCart() {
    const quantity = parseInt(popupQuantity.value);
    if (quantity > 0 && selectedProduct) {
      addToCart(selectedProduct, quantity);
      closePopup();
    }
  }

  function toggleCartDropdown() {
    cartDropdown.style.display = cartDropdown.style.display === 'block' ? 'none' : 'block';
  }

  window.addEventListener('click', function (e) {
    if (!e.target.closest('.cart-wrapper') && !e.target.closest('#popup-modal')) {
      cartDropdown.style.display = 'none';
    }
  });

  updateCartUI(); // Load cart on start

function adjustQuantity(change) {
  const quantityInput = document.getElementById('popup-quantity');
  let current = parseInt(quantityInput.value);
  current = isNaN(current) ? 1 : current;
  const newQuantity = current + change;
  if (newQuantity >= 1) {
    quantityInput.value = newQuantity;
  }
}
</script>
</body>
</html>